# PHP unpacking vs foreach benchmark

## Results

With PHP version 7.4.12, xdebug ❌, opcache ❌: 

```
Subjects: 12, Assertions: 0, Failures: 0, Errors: 0
A0To3Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 691,176b | 0.102μs | 0.103μs | 0.110μs | 2.23%  |
| benchForeach   | 0   | 1000 | 10  | 691,176b | 0.134μs | 0.135μs | 0.141μs | 1.74%  |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+

A0To50Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 691,176b | 0.433μs | 0.452μs | 0.513μs | 4.62%  |
| benchForeach   | 0   | 1000 | 10  | 691,176b | 1.098μs | 1.144μs | 1.338μs | 5.53%  |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+

A3To3Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 691,176b | 0.116μs | 0.119μs | 0.169μs | 12.40% |
| benchForeach   | 0   | 1000 | 10  | 691,176b | 0.141μs | 0.142μs | 0.147μs | 1.39%  |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+

A3To50Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 691,176b | 0.445μs | 0.452μs | 0.521μs | 5.67%  |
| benchForeach   | 0   | 1000 | 10  | 691,176b | 1.085μs | 1.092μs | 1.310μs | 6.37%  |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+

A50To3Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 691,176b | 0.444μs | 0.455μs | 0.598μs | 9.59%  |
| benchForeach   | 0   | 1000 | 10  | 691,176b | 0.257μs | 0.259μs | 0.268μs | 1.53%  |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+

A50To50Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 691,176b | 0.756μs | 0.760μs | 0.783μs | 1.19%  |
| benchForeach   | 0   | 1000 | 10  | 691,176b | 1.173μs | 1.224μs | 1.681μs | 11.45% |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
```

With PHP version 8.0.0, xdebug ❌, opcache ❌:

```
Subjects: 12, Assertions: 0, Failures: 0, Errors: 0
A0To3Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 738,256b | 0.096μs | 0.098μs | 0.144μs | 13.43% |
| benchForeach   | 0   | 1000 | 10  | 738,256b | 0.134μs | 0.142μs | 0.242μs | 20.81% |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+

A0To50Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 738,256b | 0.486μs | 0.510μs | 0.637μs | 7.67%  |
| benchForeach   | 0   | 1000 | 10  | 738,256b | 1.131μs | 1.161μs | 1.290μs | 4.16%  |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+

A3To3Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 738,256b | 0.111μs | 0.114μs | 0.123μs | 2.74%  |
| benchForeach   | 0   | 1000 | 10  | 738,256b | 0.144μs | 0.145μs | 0.164μs | 3.91%  |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+

A3To50Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 738,256b | 0.504μs | 0.515μs | 0.590μs | 4.63%  |
| benchForeach   | 0   | 1000 | 10  | 738,256b | 1.142μs | 1.152μs | 1.270μs | 3.66%  |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+

A50To3Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 738,256b | 0.494μs | 0.508μs | 0.636μs | 7.94%  |
| benchForeach   | 0   | 1000 | 10  | 738,256b | 0.274μs | 0.283μs | 0.304μs | 2.97%  |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+

A50To50Bench
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| subject        | set | revs | its | mem_peak | best    | mode    | worst   | rstdev |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
| benchUnpacking | 0   | 1000 | 10  | 738,256b | 0.889μs | 0.900μs | 1.058μs | 5.74%  |
| benchForeach   | 0   | 1000 | 10  | 738,256b | 1.246μs | 1.273μs | 1.368μs | 3.00%  |
+----------------+-----+------+-----+----------+---------+---------+---------+--------+
```

## Benchmark running

```shell
./vendor/bin/phpbench run --report=my
```

## License

This package is free software. It is released under the terms of the BSD License.
Please see [`LICENSE`](./LICENSE.md) for more information.
